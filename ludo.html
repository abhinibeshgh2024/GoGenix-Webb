<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-select=none">
    <title>WebbJamm | Ludo Live</title>
    <style>
        :root {
            --primary: #38bdf8;
            --red: #ff4757; --green: #2ecc71; --blue: #2e86de; --yellow: #f1c40f;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: #0b0f1a; color: #fff; display: flex; flex-direction: column; align-items: center; overflow: hidden; }

        /* --- UI Elements --- */
        #game-area { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; width: 100%; }
        .board-wrapper { position: relative; border: 4px solid #333; border-radius: 12px; background: #fff; box-shadow: 0 0 30px rgba(0,0,0,0.5); }
        canvas { display: block; max-width: 90vw; max-height: 70vh; }
        
        .dice-ui { margin-top: 20px; display: flex; align-items: center; gap: 20px; }
        .dice { 
            width: 60px; height: 60px; background: #fff; border-radius: 12px; color: #000; 
            font-size: 30px; display: flex; align-items: center; justify-content: center; 
            cursor: pointer; font-weight: 900; box-shadow: 0 0 15px var(--primary);
        }
        .turn-box { padding: 10px 20px; border-radius: 8px; font-weight: 800; text-transform: uppercase; margin-bottom: 10px; }
    </style>
</head>
<body>

<div id="game-area">
    <div id="turnIndicator" class="turn-box" style="background: var(--red);">RED'S TURN</div>
    
    <div class="board-wrapper">
        <canvas id="ludoCanvas"></canvas>
    </div>

    <div class="dice-ui">
        <div class="dice" id="diceBtn" onclick="rollDice()">ðŸŽ²</div>
        <div id="status">Roll a 6 to start!</div>
    </div>
</div>

<script>
    const canvas = document.getElementById("ludoCanvas");
    const ctx = canvas.getContext("2d");
    const size = 600; 
    canvas.width = size; canvas.height = size;
    const s = size / 15;

    let diceVal = 0;
    let turn = 0; // 0:Red, 1:Green, 2:Blue, 3:Yellow
    let isRolling = false;
    const pColors = ['var(--red)', 'var(--green)', 'var(--blue)', 'var(--yellow)'];
    const pNames = ["RED", "GREEN", "BLUE", "YELLOW"];

    // Goti (Pieces) positions: -1 means in Base, 0+ means on Path
    let pieces = [
        { player: 0, pos: -1, color: '#ff4757', homeX: 1.5, homeY: 1.5 },
        { player: 0, pos: -1, color: '#ff4757', homeX: 3.5, homeY: 3.5 },
        { player: 1, pos: -1, color: '#2ecc71', homeX: 10.5, homeY: 1.5 },
        { player: 2, pos: -1, color: '#2e86de', homeX: 1.5, homeY: 10.5 },
        { player: 3, pos: -1, color: '#f1c40f', homeX: 10.5, homeY: 10.5 }
    ];

    function drawBoard() {
        ctx.fillStyle = "#fff"; ctx.fillRect(0, 0, size, size);
        
        // Draw Bases
        drawBox(0, 0, 6, 6, '#ff4757'); // Red
        drawBox(9, 0, 6, 6, '#2ecc71'); // Green
        drawBox(0, 9, 6, 6, '#2e86de'); // Blue
        drawBox(9, 9, 6, 6, '#f1c40f'); // Yellow

        // Draw Path Grid
        ctx.strokeStyle = "#ddd";
        for(let i=0; i<15; i++) {
            for(let j=0; j<15; j++) ctx.strokeRect(i*s, j*s, s, s);
        }

        // Draw Home Paths
        for(let i=1; i<6; i++) {
            ctx.fillStyle = '#ff4757'; ctx.fillRect(i*s, 7*s, s, s); // Red path
            ctx.fillStyle = '#2ecc71'; ctx.fillRect(7*s, i*s, s, s); // Green path
        }

        // Draw Pieces
        pieces.forEach(p => {
            ctx.shadowBlur = 10; ctx.shadowColor = "rgba(0,0,0,0.5)";
            ctx.font = `${s*0.8}px Arial`;
            ctx.textAlign = "center";
            
            if(p.pos === -1) {
                // Draw in Base
                ctx.fillText("ðŸ”¥", p.homeX * s + s/2, p.homeY * s + s/1.5);
            } else {
                // Draw on Path (Simplified for demo)
                ctx.fillText("ðŸ”¥", (p.pos % 15) * s + s/2, Math.floor(p.pos / 15) * s + s/1.5);
            }
            ctx.shadowBlur = 0;
        });
    }

    function drawBox(x, y, w, h, col) {
        ctx.fillStyle = col; ctx.fillRect(x*s, y*s, w*s, h*s);
        ctx.fillStyle = "#fff"; ctx.fillRect((x+1)*s, (y+1)*s, (w-2)*s, (h-2)*s);
    }

    function rollDice() {
        if(isRolling) return;
        isRolling = true;
        let count = 0;
        let anim = setInterval(() => {
            diceVal = Math.floor(Math.random() * 6) + 1;
            document.getElementById('diceBtn').innerText = diceVal;
            count++;
            if(count > 8) {
                clearInterval(anim);
                isRolling = false;
                processMove();
            }
        }, 50);
    }

    function processMove() {
        let currentP = pieces.find(p => p.player === turn);
        
        if(diceVal === 6 && currentP.pos === -1) {
            currentP.pos = 0; // Bring out of base
            document.getElementById('status').innerText = "Goti Out! 6 Power!";
            drawBoard();
        } else if(currentP.pos >= 0) {
            currentP.pos += diceVal; // Move forward
            drawBoard();
        }

        setTimeout(nextTurn, 1000);
    }

    function nextTurn() {
        turn = (turn + 1) % 4;
        const ind = document.getElementById('turnIndicator');
        ind.innerText = pNames[turn] + "'S TURN";
        ind.style.background = `var(--${pNames[turn].toLowerCase()})`;
        document.getElementById('status').innerText = "Tap Dice to Roll";
    }

    drawBoard();
</script>
</body>
</html>
